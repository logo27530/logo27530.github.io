<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Your Cart</title>
<link rel="stylesheet" href="cart.css">
</head>
<body>

<h1>ğŸ›’ Your Cart</h1>

<div id="cartItems"></div>

<h2>User Details</h2>

<input id="name" placeholder="Your Name">
<input id="phone" placeholder="Phone Number">
<textarea id="address" placeholder="Full Address"></textarea>

<h2>Payment Method</h2>
<select id="payment">
  <option>Cash on Delivery</option>
  <option>UPI</option>
  <option>Bank Transfer</option>
</select>

<button onclick="orderWhatsApp()">ğŸ“² Order on WhatsApp</button>

<script >
let cart = JSON.parse(localStorage.getItem("cart")) || [];
cart = cart.filter(i => i && i.name && i.price && i.qty);
localStorage.setItem("cart", JSON.stringify(cart));



let box = document.getElementById("cartItems");

let total = 0;
box.innerHTML = "";

cart.forEach(i=>{
  if(!i.name || !i.price || !i.qty) return; // ğŸ”¥ IMPORTANT SAFETY

  let itemTotal = i.price * i.qty;
  total += itemTotal;

  box.innerHTML += `
  <div class="cart-item">
    <span>${i.name}</span>

    <div>
      <button onclick="changeQty('${i.name}', -1)">âˆ’</button>
      <b>${i.qty}</b>
      <button onclick="changeQty('${i.name}', 1)">+</button>
      <button onclick="removeItem('${i.name}')">âŒ</button>
    </div>

    <span>â‚¹${itemTotal}</span>
  </div>`;

});

box.innerHTML += `<hr><b>Total: â‚¹${total}</b>`;


function orderWhatsApp(){
  let name = document.getElementById("name").value;
  let phone = document.getElementById("phone").value;
  let address = document.getElementById("address").value;
  let payment = document.getElementById("payment").value;

  if(!name || !phone || !address){
    alert("Please fill all details");
    return;
  }

  let msg = `ğŸ›’ *New Order* %0A
ğŸ‘¤ Name: ${name}%0A
ğŸ“ Phone: ${phone}%0A
ğŸ  Address: ${address}%0A
ğŸ’³ Payment: ${payment}%0A%0A`;

  cart.forEach(i=>{
    msg += `â€¢ ${i.name} Ã— ${i.qty} = â‚¹${i.price*i.qty}%0A`;
  });

  msg += `%0AğŸ’° *Total: â‚¹${total}*`;

  window.open(`https://wa.me/918595444216?text=${msg}`,"_blank");
}
    function changeQty(name, delta){
  let item = cart.find(i => i.name === name);
  if(!item) return;

  item.qty += delta;

  if(item.qty <= 0){
    cart = cart.filter(i => i.name !== name);
  }

  localStorage.setItem("cart", JSON.stringify(cart));
  location.reload();
}

function removeItem(name){
  cart = cart.filter(i => i.name !== name);
  localStorage.setItem("cart", JSON.stringify(cart));
  location.reload();
}

</script>
</body>
</html>
